<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<meta content='width=device-width, initial-scale=1' name='viewport'>
<link href='/favicon/apple-touch-icon-57x57-8e6554ae.png' rel='apple-touch-icon-precomposed' sizes='57x57'>
<link href='/favicon/apple-touch-icon-114x114-e0cb1072.png' rel='apple-touch-icon-precomposed' sizes='114x114'>
<link href='/favicon/apple-touch-icon-72x72-a86b7103.png' rel='apple-touch-icon-precomposed' sizes='72x72'>
<link href='/favicon/apple-touch-icon-144x144-bd50bc10.png' rel='apple-touch-icon-precomposed' sizes='144x144'>
<link href='/favicon/apple-touch-icon-60x60-ca47953b.png' rel='apple-touch-icon-precomposed' sizes='60x60'>
<link href='/favicon/apple-touch-icon-120x120-068de821.png' rel='apple-touch-icon-precomposed' sizes='120x120'>
<link href='/favicon/apple-touch-icon-76x76-2bd34869.png' rel='apple-touch-icon-precomposed' sizes='76x76'>
<link href='/favicon/apple-touch-icon-152x152-da7652e0.png' rel='apple-touch-icon-precomposed' sizes='152x152'>
<link href='/favicon/favicon-196x196-569e78d9.png' rel='icon' sizes='196x196' type='image/png'>
<link href='/favicon/favicon-96x96-d809406c.png' rel='icon' sizes='96x96' type='image/png'>
<link href='/favicon/favicon-32x32-162b5c6d.png' rel='icon' sizes='32x32' type='image/png'>
<link href='/favicon/favicon-16x16-d0c2b051.png' rel='icon' sizes='16x16' type='image/png'>
<link href='/favicon/favicon-128-2f649ba2.png' rel='icon' sizes='128x128' type='image/png'>
<meta content=' ' name='application-name'>
<meta content='#FFFFFF' name='msapplication-TileColor'>
<meta content='/favicon/mstile-144x144-bd50bc10.png' name='msapplication-TileImage'>
<meta content='/favicon/mstile-70x70-2f649ba2.png' name='msapplication-square70x70logo'>
<meta content='/favicon/mstile-150x150-999c62ba.png' name='msapplication-square150x150logo'>
<meta content='/favicon/mstile-310x150-37756fac.png' name='msapplication-wide310x150logo'>
<meta content='/favicon/mstile-310x310-6bd894f0.png' name='msapplication-square310x310logo'>
<title>
Minim OSD
</title>
<link href="/assets/stylesheets/all-6acef658.css" rel="stylesheet" />
<script src="/assets/javascripts/all-d5b91b8e.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-7406390-2', 'auto');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  
    // outbound link tracking
    // http://www.sitepoint.com/track-outbound-links-google-analytics/
    (function($) {
      "use strict";
      // current page host
      var baseURI = window.location.host;
      // click event on body
      $("body").on("click", function(e) {
        // abandon if link already aborted or analytics is not available
        if (e.isDefaultPrevented() || typeof ga !== "function") return;
        // abandon if no active link or link within domain
        var link = $(e.target).closest("a");
        if (link.length != 1 || baseURI == link[0].host) return;
        // cancel event and record outbound link
        e.preventDefault();
        var href = link[0].href;
        ga('send', {
          'hitType': 'event',
          'eventCategory': 'outbound',
          'eventAction': 'link',
          'eventLabel': href,
          'hitCallback': loadPage
        });
        // redirect after one second if recording takes too long
        setTimeout(loadPage, 1000);
        // redirect to outbound page
        function loadPage() {
          document.location = href;
        }
      });
    })(jQuery);
</script>

<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />
</head>
<body>
<nav class='navbar navbar-default' id='top' role='navigation'>
<div class='container'>
<div class='navbar-header'>
<div class='navbar-brand'>
<a href='/blog/'>
<img src="/assets/images/home/smile-0289c4fe.jpg" />
</a>
<span>Minim OSD</span>
</div>
<button class='navbar-toggle' data-target='.navbar-collapse' data-toggle='collapse' type='button'>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
</button>
<div class='navbar-right collapse navbar-collapse' id='bs-nav-collapse'>
<ul class='nav navbar-nav'>
<li>
<form class='search navbar-form' role='search'>
<div class='form-group'>
<input class='form-control bloodhound typeahead' data-articles='[["BetaFlight Kiss Flight Controller","/blog/2016/07/29/betaflight-kiss-flight-controller/"],["J-Link Getting Started Guide","/blog/2016/07/25/j-link-getting-started-guide/"],["Eachine EV800 Review","/blog/2016/07/10/eachine-ev800-review/"],["Eachine Goggles One Review","/blog/2016/07/10/eachine-goggles-one-review/"],["FlySky i6 Radio Setup and Hacking Guide","/blog/2016/07/09/flysky-i6-radio-setup-and-hacking-guide/"],["BetaFlight Spektrum Satellite Receiver Guide","/blog/2016/07/09/betaflight-spektrum-satellite-receiver-guide/"],["Omnibus Flight Controller and Airbot Typhoon 180 Miniquad Build","/blog/2016/07/07/omnibus-typhoon-miniquad/"],["FPV Goggle Guide","/blog/2016/06/22/fpv-goggle-guide/"],["HobbyKing Quanum V2 Pro Goggles","/blog/2016/05/11/hobbyking-quanum-v2-pro-goggles/"],["Drone Building 101 with the HobbyKing FPV Starter Setup","/blog/2016/05/08/drone-building-101-with-the-hobbyking-fpv-starter-setup/"],["STM32 hardfault debugging","/blog/2016/05/04/stm32-hardfault-debugging/"],["Eachine VR-007 Goggle Review","/blog/2016/04/25/eachine-vr-007-goggle-review/"],["Rctimer BeeRotor u210 mini quad build, setup and review","/blog/2016/04/24/rctimer-u210-mini-quad-build-setup-and-review/"],["AirBot Flip32 F3 AIO Lite and Typhoon 4-in-1 ESC","/blog/2016/04/11/airbot-flip32-f3-aio-lite-and-typhoon-4-in-1-esc/"],["DYS X160 v3","/blog/2016/04/05/dys-x160-v3/"],["Turnigy Reaktor 250W Charger","/blog/2016/04/02/turnigy-reaktor-250w-charger/"],["HobbyKing Graphene and Bolt High Voltage LiPo Battery Analysis","/blog/2016/03/25/hobbyking-graphene-battery-analysis/"],["BetaFlight in-flight PID tuning","/blog/2016/03/24/betaflight-in-flight-pid-tuning/"],["Drone Building at Maker Faire Bay Area 2016","/blog/2016/03/23/drone-building-at-maker-faire-bay-area-2016/"],["Rctimer BR-X200 Mini-quad Build, Setup and Review","/blog/2016/03/22/rctimer-br-x200-mini-quad-build-setup-and-review/"],["AVR Dissassembly","/blog/2016/02/25/avr-dissassembly/"],["Victory230 FPV Mini-quad Setup and Review","/blog/2016/02/10/rctimer-victory230-fpv-miniquad/"],["FrSky RX SBUS and Frsky DJT Module","/blog/2016/02/09/airwolf-diy-frsky-rx-sbus/"],["HMDVR FPV Video Recorder","/blog/2016/02/06/hmdvr-fpv-video-recorder/"],["Rctimer BeerotorF3 Flight Controller","/blog/2016/02/03/rctimer-beerotorf3-flight-controller/"],["Flying Sony NEX Micro 4/3rds Camera","/blog/2016/01/29/flying-micro-4-3rds-camera/"],["Q600 Quadcopter","/blog/2016/01/29/rctimer-q600-quadcopter/"],["ASP micro 4/3rds Gimbal and SimpleBGC 32-bit Gimbal Controller","/blog/2016/01/29/rctimer-asp-micro-4-3rds-gimbal-and-simplebgc-32-bit-gimbal-controller/"],["PixHawk Flashing and Setup","/blog/2016/01/29/rctimer-fixhawk-pixhawk-flashing-and-setup/"],["BlHeli ESCs","/blog/2015/12/06/blheli-esc-identification/"],["BlHeli ESC Upgrading and Configuration","/blog/2015/12/06/blheli-configuration/"],["BlHeli CleanFlight ESC Calibration","/blog/2015/12/06/blheli-calibration/"],["Rctimer Micro 160 BeeRotor Build, Setup and Review","/blog/2015/12/05/rctimer-micro-160-beerotor-build-setup-and-review/"],["Flashing SiLabs xRotor 20a with BlHeli via C2 4w-if","/blog/2015/11/16/flashing-xrotor-20a-with-blheli-via-4w-if/"],["Rctimer OZE32 / RTFQ Flip32 AIO Integrated Flight Controller Review and Setup","/blog/2015/11/09/rctimer-oze32-integrated-flight-controller-review-and-setup/"],["Rooting Marshmellow, keeping SELinux","/blog/2015/11/03/rooting-marshmellow-keeping-selinux/"],["MultiRotor Setup Checklist","/blog/2015/10/29/multirotor-setup-checklist/"],["ST-LINK flash and debug on the SPRacingF3","/blog/2015/10/24/st-link-flash-and-debug-on-the-spracingf3-discovery/"],["Debugging Android Native (NDK) Apps","/blog/2015/09/27/debugging-android-native-ndk-apps/"],["Fixing an Arduino 0x000000 Error","/blog/2015/09/16/fixing-an-arduino-0x000000-error/"],["GPS VK16U6 CleanFlight Setup","/blog/2015/08/26/gps-vk16u6-cleanflight-setup/"],["Go FPV Latency Testing","/blog/2015/08/24/go-fpv-latency-testing/"],["Building Android on Ubuntu 14.04","/blog/2015/07/23/building-android-on-ubuntu-14-04/"],["Migrating to Amazon Elastic Map Reduce (EMR)","/blog/2015/07/15/migrating-to-amazon-elastic-map-reduce-emr/"],["Naze32 ST-Link Debugging","/blog/2015/07/06/naze32-st-link-debugging/"],["Decompiling an APK","/blog/2015/06/30/decompiling-an-apk/"],["Nexpose Community Edition copy Scan Template","/blog/2015/06/17/nexpose-community-edition-copy-scan-template/"],["Wireless Video Tx/Rx FPV Channels","/blog/2015/06/17/boscam-tx-rx-fpv-channels/"],["Making a UHF 433mhz Inverted Vee Antenna Set","/blog/2015/06/15/making-a-uhf-433mhz-inverted-vee-antenna-set/"],["Setup OrangeLRS with OpenLRSng","/blog/2015/05/21/setup-orangelrs-with-openlrsng/"],["Go FPV Goggles","/blog/2015/05/21/go-fpv-goggles/"],["FPV250 with Cleanflight, Minimosd, OpenLRSng and a Xiaomi Yi GoPro Clone","/blog/2015/05/19/fpv250-cleanflight/"],["Flashing BlHeli on HobbyKing BlueSeries 12a ESCs With a Chinese Arduino Nano Clone","/blog/2015/05/15/flashing-blheli-on-hobbyking-blueseries-12a-escs-with-a-chinese-arduino-nano-clone/"],["Flashing NodeMCU on the ESP8266","/blog/2015/05/14/flashing-nodemcu-on-the-esp8266/"],["Ebay HC-05 Bluetooth Setup Guide","/blog/2015/05/12/ebay-hc-05-bluetooth-setup-guide/"],["3D Camera on the Tricopter","/blog/2015/05/12/3d-camera-on-the-tricopter/"],["ProRes editing in Premier","/blog/2015/05/11/prores-editing-in-photoshop/"],["Xiaomi Yi -- The Ant Camera","/blog/2015/05/08/xiaomi-yi-the-ant-camera/"],["Minim OSD","/blog/2015/04/22/minim-osd/"],["Flashing BlHeli on HobbyKing F20 ESCs With a Chinese Arduino Nano Clone","/blog/2015/04/20/flashing-blheli-on-hobbyking-f20-escs-with-a-chinese-arduino-nano-clone/"],["Handling Dates in Hadoop Pig","/blog/2015/04/17/handling-dates-in-hadoop-pig/"],["LiPo Battery Price Analysis","/blog/2015/04/10/lipo-battery-price-analysis/"],["ADB over WiFi (aka, how do I debug when using USB host mode?)","/blog/2015/03/27/adb-over-wifi-aka-how-do-i-debug-when-using-usb-host-mode/"],["Shrink a linux VM on OSX","/blog/2015/03/18/shrink-a-linux-vm-on-osx/"],["Mounting a VHD NTFS image on Ubuntu","/blog/2015/02/27/mounting-a-vhd-ntfs-image-on-ubuntu/"],["Ubuntu on the Beaglebone Black","/blog/2015/01/16/ubuntu-on-the-beaglebone-black/"],["Configuring the HK-T6A for a Flight Simulator","/blog/2015/01/02/configuring-the-hk-t6a-for-a-flight-simulator/"],["A complete noob&#x0027;s guide to RC","/blog/2015/01/02/a-complete-noobs-guide-to-rc/"],["DropCam on a Captive Portal","/blog/2014/11/17/dropcam-on-a-captive-portal/"],["Java reversing tips","/blog/2014/09/18/java-reversing-tips/"],["Ooize Data Pipeline Done-Flag","/blog/2014/09/02/oozie-data-pipeline-done-flag/"],["Time Machine on exFat","/blog/2014/08/06/Time_Machine_on_exFat/"],["Optimizing Postgresql","/blog/2014/01/31/Optimizing_Postgresql/"],["Mail Maker","/blog/2014/01/24/Mail_Maker/"],["Angularjs and Rails","/blog/2013/07/12/Angularjs_and_Rails/"],["nginx ssl chained certs","/blog/2013/04/24/nginx_ssl_chained_certs/"],["rails log tagging","/blog/2013/04/24/rails_log_tagging/"],["Converting an Android Project to Maven","/blog/2013/04/16/Converting_an_Android_Project_to_Maven/"],["Oh! Map my rails!","/blog/2013/04/09/Oh_Map_my_rails/"],["mysql permissions","/blog/2013/04/09/mysql_permissions/"],["reset mysql slave","/blog/2013/03/29/reset_mysql_slave/"],["installing rmagick on 10.8 with homebrew","/blog/2013/02/14/installing_rmagick_on_108_with_homebrew/"],["NP-Completeness","/blog/2013/02/08/NP-Completeness/"],["Find and replace non-breaking spaces in vim","/blog/2013/02/01/Find_and_replace_non-breaking_spaces_in_vim/"],["Open Resty the Prebuilt Reverse Proxy","/blog/2013/02/01/Open_Resty_the_Prebuilt_Reverse_Proxy/"],["Sublime Text 2 Tweaks","/blog/2012/12/17/Sublime_Text_2_Tweaks/"],["Batch Convert CR2 to JPG","/blog/2012/12/01/Batch_Convert_CR2_to_JPG/"],["Androids in the wild","/blog/2012/06/30/Androids_in_the_wild/"],["Why you need database_cleaner","/blog/2012/06/11/Why_you_need_database_cleaner/"],["Find and replace in files on linux/unix","/blog/2012/05/12/Find_and_replace_in_files_on_linuxunix/"],["a pithy guide to railsconf 2012","/blog/2012/04/26/a_pithy_guide_to_railsconf_2012/"],["faster rails boot ruby 1.9.3 + debugger","/blog/2012/04/12/faster_rails_boot_ruby_193_debugger/"],["homebrew -- fix that nasty mysql.server start segfault","/blog/2012/03/29/homebrew_--_fix_that_nasty_mysqlserver_start_segfault/"],["read/write filesystem on rooted android for an ad-free android experience","/blog/2012/02/14/readwrite_filesystem_on_rooted_android_for_an_ad-free_android_experience/"],["Turn Wikipedia Back On","/blog/2012/01/17/Turn_Wikipedia_Back_On/"],["compiling qt4 on centos 5","/blog/2012/01/06/compiling_qt4_on_centos_5/"],["pip install pymongo with xcode 4","/blog/2011/08/09/pip_install_pymongo_with_xcode_4/"],["interactive python history -- better titled \"gimme some up arrow love\"","/blog/2011/08/05/interactive_python_history_--_better_titled_gimme_some_up_arrow_love/"],["Centos 5.5 yum repo sha256 fix","/blog/2011/07/27/Centos_55_yum_repo_sha256_fix/"],["Apple Keyboard for Android!","/blog/2011/07/15/Apple_Keyboard_for_Android/"],["jQuery Everywhere","/blog/2011/05/24/jQuery_Everywhere/"],["Django Migrations","/blog/2011/05/11/Django_Migrations/"],["RVM + Rails + Git + HTML5 Boiler Plate... What more could you possibly want?","/blog/2011/02/22/RVM_Rails_Git_HTML5_Boiler_Plate_What_more_could_you_possibly_want/"],["OneCast 2.0 - downloadable podcasts for androids of every color","/blog/2011/02/18/OneCast_20_-_downloadable_podcasts_for_androids_of_every_color/"],["Default Android Menu Icons in Your App","/blog/2011/02/17/Default_Android_Menu_Icons_in_Your_App/"],["Windows 7 x64 Android Development (ADB)","/blog/2010/11/06/Windows_7_x64_Android_Development_ADB/"],["Firefox Plugin - Watching for an Application Exit Event","/blog/2010/05/03/Firefox_Plugin_-_Watching_for_an_Application_Exit_Event/"],["Stop Redrawing a Fixed Orientation Android App","/blog/2010/03/08/Stop_Redrawing_a_Fixed_Orientation_Android_App/"]]' placeholder='Search' type='text'>
</div>
</form>
</li>
</ul>
</div>
</div>
</div>
</nav>

<div class='container'>
<div class='row row-offcanvas row-offcanvas-left'>
<!-- sidebar -->
<div class='col-xs-3 col-sm-3 sidebar-offcanvas'>
<div id='sidebar' role='navigation'>
<div class='sidebar-contents'>
<div class='row'>
<div class='col-lg-12 page-header'>
<a href='#top'>Contents</a>
</div>
</div>
<div class='row'>
<div class='col-lg-12 table-of-contents'>
<ul class="nav"><li><a class="type-h2" href="#how-to-choose-an-osd"><h2>How to choose an OSD</h2></a></li><ul><li><a class="type-h3" href="#micro-minimosd"><h3>Micro MinimOSD</h3></a></li>
<li><a class="type-h3" href="#minimosd"><h3>MinimOSD</h3></a></li>
<li><a class="type-h3" href="#stackable-minimosd"><h3>Stackable MinimOSD</h3></a></li>
<li><a class="type-h3" href="#power-distribution-board-with-a-minimosd"><h3>Power Distribution Board with a MinimOSD</h3></a></li>
<li><a class="type-h3" href="#aio-flight-controller"><h3>AIO Flight Controller</h3></a></li>
<li><a class="type-h3" href="#flight-controller-with-an-osd"><h3>Flight controller with an OSD</h3></a></li></ul>
<li><a class="type-h2" href="#parts"><h2>Parts</h2></a></li>
<li><a class="type-h2" href="#menu"><h2>Menu</h2></a></li>
<li><a class="type-h2" href="#wiring"><h2>Wiring</h2></a></li><ul><li><a class="type-h3" href="#breakout"><h3>Breakout Pins</h3></a></li>
<li><a class="type-h3" href="#flashing"><h3>Flashing</h3></a></li>
<li><a class="type-h3" href="#ide"><h3>Building the IDE</h3></a></li>
<li><a class="type-h3" href="#cleanflight-config"><h3>Cleanflight Configuration</h3></a></li>
<li><a class="type-h3" href="#osd-config"><h3>Scarab OSD Configuration</h3></a></li>
<li><a class="type-h3" href="#troubleshooting&quot;"><h3>Troubleshooting</h3></a></li>
<li><a class="type-h3" href="#voltage-divider"><h3>Voltage Monitor</h3></a></li>
<li><a class="type-h3" href="#current-sensor"><h3>Current Sensing</h3></a></li><ul><li><a class="type-h4" href="#current-sensor-first-attempt"><h4>First attempt

</h4></a></li>
<li><a class="type-h4" href="#current-sensor-second-attempt"><h4>Second attempt

</h4></a></li></ul>
<li><a class="type-h3" href="#rssi"><h3>RSSI</h3></a></li></ul></ul>
</div>
</div>
<div class='row'>
<div class='col-lg-12 page-header'>
Related Articles
</div>
</div>
<div class='row'>
<div class='col-lg-12 related'>
<ul>
<li><a href="/blog/2016/01/29/rctimer-q600-quadcopter/">Q600 Quadcopter</a></li>
<li><a href="/blog/2016/07/09/flysky-i6-radio-setup-and-hacking-guide/">FlySky i6 Radio Setup and Hacking Guide</a></li>
<li><a href="/blog/2016/06/22/fpv-goggle-guide/">FPV Goggle Guide</a></li>
<li><a href="/blog/2016/04/05/dys-x160-v3/">DYS X160 v3</a></li>
<li><a href="/blog/2016/01/29/rctimer-fixhawk-pixhawk-flashing-and-setup/">PixHawk Flashing and Setup</a></li>
<li><a href="/blog/2016/01/29/rctimer-asp-micro-4-3rds-gimbal-and-simplebgc-32-bit-gimbal-controller/">ASP micro 4/3rds Gimbal and SimpleBGC 32-bit Gimbal Controller</a></li>
</ul>
</div>
</div>
<div class='row'>
<div class='col-lg-12 page-header'></div>
</div>
<div class='row'>
<div class='col-lg-12 text-center'>
Checkout my other guides at
<a href='/blog'>nathan.vertile.com/blog</a>
</div>
</div>
<div class='row'>
<div class='col-lg-12 page-header text-center'>
<div class='drawer-footer'>
<small>
©
<a href='mailto:nathan@vertile.com'>Nathan Tsoi</a>
</small>
</div>
</div>
</div>
<div class='row last'>
<div class='col-lg-12 text-center'>
<a class='btn-sm btn-default' href='https://github.com/nathantsoi' target='_blank'>
<i class='fa fa-github'></i>
</a>
<a class='btn-sm btn-default' href='https://bitbucket.org/nathantsoi' target='_blank'>
<i class='fa fa-bitbucket'></i>
</a>
<a class='btn-sm btn-default' href='https://twitter.com/nathantsoi/' target='_blank'>
<i class='fa fa-twitter'></i>
</a>
<a class='btn-sm btn-default' href='https://angel.co/nathantsoi' target='_blank'>
<i class='fa fa-angellist'></i>
</a>
<a class='btn-sm btn-default' href='https://linkedin.com/in/nattsoi/' target='_blank'>
<i class='fa fa-linkedin'></i>
</a>
<a class='btn-sm btn-default' href='https://facebook.com/nathantsoi' target='_blank'>
<i class='fa fa-facebook'></i>
</a>
<a class='btn-sm btn-default' href='https://plus.google.com/112518806102274696668' target='_blank'>
<i class='fa fa-google-plus'></i>
</a>
<a class='btn-sm btn-default' href='https://news.ycombinator.com/user?id=natvert' target='_blank'>
<i class='fa fa-hacker-news'></i>
</a>
<a class='btn-sm btn-default' href='https://trello.com/nathantsoi' target='_blank'>
<i class='fa fa-trello'></i>
</a>
</div>
</div>
</div>
</div>
</div>

<!-- main area -->
<div class='col-sm-9 col-xs-12' id='mainbar'>
<article>
<p>Putting together the flight controller for <a href="/blog/2015/05/19/fpv250-cleanflight/">my first mini quad</a> I decided on setting up a full-featured OSD.</p>

<div class="videoWrapper">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/RSPe1rwKyac" frameborder="0" allowfullscreen></iframe>
</div>

<p>Long story short, the best firmware is ShikOfTheRa&#39;s fork of MWOSD: <a href="https://github.com/ShikOfTheRa/scarab-osd">scarab-osd</a></p>

<h2 id="how-to-choose-an-osd">How to choose an OSD</h2>

<p>There are lots of different OSD boards available on the market, but basically all of them are based on the &quot;MinimOSD&quot; design. At the core they are just a Arduino 328p processor and a MAX7456 chip that handles the text overlay. The only differences are form factor and power management.</p>

<p>One thing to watch out for is that the MAX7456 chip is sensitive to voltage spikes. A manufacturer, who&#39;s website you can find at myairbot.com, has solved this issue by creating their own version of the <code>MAX7456</code> chip called the <code>AB7456</code>, this chip handles voltage spikes much better, so if you can find a MinimOSD with the <code>AB7456</code>, it may be slightly more robust than one with a <code>MAX7456</code> chip.</p>

<p>From smallest to largest, the sizes are:</p>

<h3 id="micro-minimosd"><a href="http://www.banggood.com/MICRO-MinimOSD-Minim-OSD-Mini-OSD-W-KV-Team-MOD-For-Naze32-Flight-Controller-p-990556.html?p=1G09211226617201502J">Micro MinimOSD</a></h3>

<div class='ratio-box-resizer img-quarter-width'><div class='ratio-box' style='padding-bottom: 98.91891891891892%;'><a id="assets-images-blog-minimosd-devices-micro-minimosd-top-ed-f-jpg" href="http://www.banggood.com/MICRO-MinimOSD-Minim-OSD-Mini-OSD-W-KV-Team-MOD-For-Naze32-Flight-Controller-p-990556.html?p=1G09211226617201502J" class="linked-img "><img src='/assets/images/blog/minimosd/devices/micro-minimosd-top-83ed598f.jpg' class='trailing-space' ></img></a></div></div>

<p>You can tell that any one of these boards (or any other board) will run scarb-osd by identifying the MAX7456 chip and Atmel328p chips.</p>

<p>Here is what the MAX chip looks like:</p>

<div class='ratio-box-resizer img-quarter-width'><div class='ratio-box' style='padding-bottom: 95.81151832460732%;'><a id="assets-images-blog-minimosd-devices-micro-minimosd-bottom-max-a-a-f-jpg" href="/assets/images/blog/minimosd/devices/micro-minimosd-bottom-max-a2a57f19.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/devices/micro-minimosd-bottom-max-a2a57f19.jpg' class='trailing-space' ></img></a></div></div>

<p>Here is what a small version of the Atmel chip looks like:</p>

<div class='ratio-box-resizer img-quarter-width'><div class='ratio-box' style='padding-bottom: 98.91891891891892%;'><a id="assets-images-blog-minimosd-devices-micro-minimosd-top-atmel-b-a-c-jpg" href="/assets/images/blog/minimosd/devices/micro-minimosd-top-atmel-4b938a4c.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/devices/micro-minimosd-top-atmel-4b938a4c.jpg' class='trailing-space' ></img></a></div></div>

<p>And a pinout if you&#39;re using one of these:</p>

<div class='ratio-box-resizer img-half-width'><div class='ratio-box' style='padding-bottom: 68.69118905047048%;'><a id="assets-images-blog-minimosd-devices-micro-minimosd-pinout-b-jpg" href="/assets/images/blog/minimosd/devices/micro-minimosd-pinout-8391910b.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/devices/micro-minimosd-pinout-8391910b.jpg' class='trailing-space' ></img></a></div></div>

<h3 id="minimosd"><a href="http://www.banggood.com/MinimOSD-MAVLink-OSD-APM-APM2-Flight-Control-Board-p-73436.html?p=1G09211226617201502J">MinimOSD</a></h3>

<div class='ratio-box-resizer img-quarter-width'><div class='ratio-box' style='padding-bottom: 100.0%;'><a id="assets-images-blog-minimosd-devices-minimosd-e-b-f-jpg" href="http://www.banggood.com/MinimOSD-MAVLink-OSD-APM-APM2-Flight-Control-Board-p-73436.html?p=1G09211226617201502J" class="linked-img "><img src='/assets/images/blog/minimosd/devices/minimosd-e16b13f6.jpg' class='trailing-space' ></img></a></div></div>

<p>There are quite a few variants of the MinimOSD form factor, the two biggest difference being if analog to digital (ADC) pins are broken out <a href="http://s.click.aliexpress.com/e/2ByNBAAAi">like on this one</a> and how the power management is done.</p>

<p>The best Minim OSD variants have a solder bridge that can be used to power the MAX chip over 5v instead of 12v, which is definitely the best way to go, since the MAX chip can easily burn out at anything over 5v. If the board doesn&#39;t have a solder bridge, you&#39;ll need to wire it up as I show below.</p>

<p>The <a href="http://www.banggood.com/MinimOSD-MAVLink-OSD-APM-APM2-Flight-Control-Board-p-73436.html?p=1G09211226617201502J">MinimOSD shown above</a> has a solder bridge (actually 2). Just connect the two sets of pads, one on the front and one on the back and you&#39;re good to go. Don&#39;t plug anything into the V+ on the camera side.</p>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 91.0%;'><a id="assets-images-blog-minimosd-solder-pad-schematic-c-d-jpg" href="/assets/images/blog/minimosd/solder-pad-schematic-9160c2d1.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/solder-pad-schematic-9160c2d1.jpg' class='trailing-space' ></img></a></div></div>

<p>Here&#39;s what it looks like when the ADC pins are broken out. This is only useful if you want to send data to the OSD that does not come from the flight controller, such as an analog RSSI signal.</p>

<div class='ratio-box-resizer img-quarter-width'><div class='ratio-box' style='padding-bottom: 100.0%;'><a id="assets-images-blog-minimosd-devices-minimosd-breakout-db-ec-d-jpg" href="http://s.click.aliexpress.com/e/2ByNBAAAi" class="linked-img "><img src='/assets/images/blog/minimosd/devices/minimosd-breakout-db80ec8d.jpg' class='trailing-space' ></img></a></div></div>

<h3 id="stackable-minimosd"><a href="http://www.banggood.com/FPV-OSD-On-Screen-Displayer-Support-10DOF-6DOF-Naze32-Flight-Controller-p-997445.html?p=1G09211226617201502J">Stackable MinimOSD</a></h3>

<div class='ratio-box-resizer img-quarter-width'><div class='ratio-box' style='padding-bottom: 100.0%;'><a id="assets-images-blog-minimosd-devices-minimosd-stackable-bb-f-jpg" href="http://www.banggood.com/FPV-OSD-On-Screen-Displayer-Support-10DOF-6DOF-Naze32-Flight-Controller-p-997445.html?p=1G09211226617201502J" class="linked-img "><img src='/assets/images/blog/minimosd/devices/minimosd-stackable-6bb7f626.jpg' class='trailing-space' ></img></a></div></div>

<p>If you&#39;ve got a stacking Flight Controller / PDB setup, you can get a <a href="http://www.banggood.com/FPV-OSD-On-Screen-Displayer-Support-10DOF-6DOF-Naze32-Flight-Controller-p-997445.html?p=1G09211226617201502J">stackable MinimOSD</a> to go with them.</p>

<h3 id="power-distribution-board-with-a-minimosd"><a href="http://www.banggood.com/FPV-OSD-On-Screen-Displayer-Support-10DOF-6DOF-Naze32-Flight-Controller-p-997445.html?p=1G09211226617201502J">Power Distribution Board with a MinimOSD</a></h3>

<div class='ratio-box-resizer img-quarter-width'><div class='ratio-box' style='padding-bottom: 100.0%;'><a id="assets-images-blog-minimosd-devices-minim-osd-pdb-bottom-dae-b-jpg" href="http://www.banggood.com/FPV-OSD-On-Screen-Displayer-Support-10DOF-6DOF-Naze32-Flight-Controller-p-997445.html?p=1G09211226617201502J" class="linked-img "><img src='/assets/images/blog/minimosd/devices/minim-osd-pdb-bottom-dae2610b.jpg' class='trailing-space' ></img></a></div></div>

<div class='ratio-box-resizer img-quarter-width'><div class='ratio-box' style='padding-bottom: 100.0%;'><a id="assets-images-blog-minimosd-devices-minim-osd-pdb-top-e-cbc-jpg" href="http://www.banggood.com/FPV-OSD-On-Screen-Displayer-Support-10DOF-6DOF-Naze32-Flight-Controller-p-997445.html?p=1G09211226617201502J" class="linked-img "><img src='/assets/images/blog/minimosd/devices/minim-osd-pdb-top-64e36cbc.jpg' class='trailing-space' ></img></a></div></div>

<h3 id="aio-flight-controller"><a href="/blog/2015/11/09/rctimer-oze32-integrated-flight-controller-review-and-setup/">AIO Flight Controller</a></h3>

<p>If you&#39;re building a super-tiny quadcopter, like a <a href="/blog/2015/12/05/rctimer-micro-160-beerotor-build-setup-and-review/">Beerotor160</a> you can get a flight controller like the <a href="/blog/2015/11/09/rctimer-oze32-integrated-flight-controller-review-and-setup/">OZE32</a> which is a Naze32 + OSD + PDB all on a normal 35x35mm flight control board.</p>

<div class='ratio-box-resizer img-quarter-width'><div class='ratio-box' style='padding-bottom: 74.95559502664298%;'><a id="assets-images-blog-flight-controllers-oze-b-a-b-jpg" href="http://www.readytoflyquads.com/flip32-aio" class="linked-img "><img src='/assets/images/blog/flight_controllers/oze32-b4a08b76.jpg' class='trailing-space' ></img></a></div></div>

<h3 id="flight-controller-with-an-osd">Flight controller with an OSD</h3>

<p>Update July, 2016: There is a new flight controller out with an integrated OSD that can be directly configured via the <a href="https://chrome.google.com/webstore/detail/betaflight-configurator/kdaghagfopacdngbohiknlhcocjccjao">BetaFlight Configurator</a>. I highly recommend you checkout the <a href="/blog/2016/07/07/omnibus-typhoon-miniquad/">OmnibusF3</a> if you&#39;re looking for an awesome new flight controller with an integrated OSD.</p>

<p>Finally, if you want an F3 flight controller with a built-in OSD, grab a <a href="/blog/2016/02/03/rctimer-beerotorf3-flight-controller/">BRF3 Flight Controller</a>  and <a href="http://rctimer.com/product-1593.html">BRF3 PDB</a> (which includes the current sensor that enables the MAH consumption view on your OSD).</p>

<div class='ratio-box-resizer img-quarter-width'><div class='ratio-box' style='padding-bottom: 99.8046875%;'><a id="assets-images-blog-flight-controllers-brf-brf-bottom-ee-ac-jpg" href="http://rctimer.com/product-1592.html/#r-pNathanT" class="linked-img "><img src='/assets/images/blog/flight_controllers/brf3/brf3-bottom-ee3ac748.jpg' class='trailing-space' ></img></a></div></div>

<p>Let&#39;s get started</p>

<h2 id="parts">Parts</h2>

<p>Here are the parts that I used:</p>

<ul>
<li><p><a href="http://www.banggood.com/MinimOSD-MAVLink-OSD-APM-APM2-Flight-Control-Board-p-73436.html?p=1G09211226617201502J">MinimOSD from Banggood</a></p></li>
<li><p><a href="http://cgi.ebay.com/ws/eBayISAPI.dll?ViewItem&amp;item=281568666366">or get the MinimOSD from Ebay</a></p></li>
<li><p><a href="http://cgi.ebay.com/ws/eBayISAPI.dll?ViewItem&amp;item=370999422953">Current Sensor -- ACS758LCB-100U from Ebay</a></p>

<ul>
<li>Unidirectional 40mV/A</li>
<li>A hall effect instead of a shunt resistor. More efficient, but also slightly more expensive. Buy a shunt resistor if you want to save a few bucks. This stackexchange covers some of the pros/cons <a href="http://electronics.stackexchange.com/questions/57758/acs758-current-sensor-output-voltage-cannot-be-read-by-arduino#answer-57777">http://electronics.stackexchange.com/questions/57758/acs758-current-sensor-output-voltage-cannot-be-read-by-arduino#answer-57777</a></li>
<li>There are a bunch of great docs on this sensor over at Allegro Micro&#39;s <a href="http://www.allegromicro.com/en/Design-Center/Technical-Documents/Hall-Effect-Sensor-IC-Publications.aspx">publication page</a>.</li>
</ul></li>
</ul>

<h2 id="menu">Menu</h2>

<p>The best feature of ScarabOSD is that you can change a variety of settings with your transmitter, straight from the OSD, without needing to plug in a computer!</p>

<p>Navigate with your <code>PITCH</code> and <code>ROLL</code> stick then use the <code>YAW</code> stick to change values.</p>

<p>Available menus are defined <a href="https://github.com/ShikOfTheRa/scarab-osd/blob/master/MW_OSD/Def.h#L64">here</a>:</p>
<pre class="highlight plaintext"><code>  #define MENU0  0 //STATISTICS
  #define MENU1  1 //PID CONFIG
  #define MENU2  2 //RC TUNING
  #define MENU3  3 //VOLTAGE
  #define MENU4  4 //RSSI
  #define MENU5  5 //CURRENT
  #define MENU6  6 //DISPLAY
  #define MENU7  7 //ADVANCED
//  #define MENU8  X //GPS TIME
  #define MENU9  8 //ALARMS
  #define MENU10 9//PROFILE+PID CONTROLLER
</code></pre>

<h2 id="wiring">Wiring</h2>

<p>First, note that if you&#39;re going to get data from the flight controller, over the serial port. Breaking out the pins (other than voltage) is not necessary.</p>

<p><a href="http://fpvlab.com/forums/member.php?2197-Derrick">Derrick</a>, over at FPVLab wrote <a href="http://fpvlab.com/forums/showthread.php?24144-KV-OSD">this awesome post about wiring the minimosd</a>, and drew up this awesome diagram. Even though it&#39;s for a board with the A/D converter pins already broken out, it gets across the general idea</p>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 79.7377830750894%;'><a id="assets-images-blog-minimosd-minimosd-wiring-e-png" href="/assets/images/blog/minimosd/minimosd-wiring-7539557e.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/minimosd-wiring-7539557e.png' class='trailing-space' ></img></a></div></div>

<p>As it comes, the ebay minim osd uses 2 different voltages, 5v on the flight controller/atmega328p side and 12v on the video/max7456 side. Let&#39;s change that to use 5v from the flight controller on both sides. This serves two purposes, first it allows the chip to be powered by the UART-USB adapter, meaning you dont have to plug in your copter battery to upload font and second it ensures nothing burns out if we were to accidentally apply more than 12v on the video side of the chip. <a href="https://hoogvlieger.wordpress.com/2013/11/01/rctimer-minimosd-5v-mod/">Hoogvliger describes how to do this on his blog</a> for the v1 chip. I&#39;ve updated the photos for v2.</p>

<p>Remove the diode B2. Tape or clamp the board down, grab the diode with a pair of tweezers and heat one side with your iron. Pull that side off and do the other side</p>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 75.0%;'><a id="assets-images-blog-minimosd-remove-diode-e-c-jpg" href="/assets/images/blog/minimosd/remove-diode-0527e65c.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/remove-diode-0527e65c.jpg' class='trailing-space' ></img></a></div></div>

<ul>
<li>Wire the flight controller side v5 to the linear voltage regulator. Solder the pin side first then pass the wire through the ISP header, flux the voltage regulator and tin the wire, it should stick right on, no extra solder needed.</li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 75.0%;'><a id="assets-images-blog-minimosd-voltage-regulator-c-jpg" href="/assets/images/blog/minimosd/voltage-regulator-1c979138.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/voltage-regulator-1c979138.jpg' class='trailing-space' ></img></a></div></div>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 66.50390625%;'><a id="assets-images-blog-minimosd-DSC-dd-e-jpg" href="/assets/images/blog/minimosd/DSC05362-8dd665e3.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/DSC05362-8dd665e3.jpg' class='trailing-space' ></img></a></div></div>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 66.50390625%;'><a id="assets-images-blog-minimosd-DSC-c-f-e-jpg" href="/assets/images/blog/minimosd/DSC05361-9c1f3e75.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/DSC05361-9c1f3e75.jpg' class='trailing-space' ></img></a></div></div>

<ul>
<li><p>Jump the flight controller side GND to the video side ground</p></li>
<li><p>Note that when powering the OSD off the flight controller, any noise from the ESCs will go straight into your video signal. Therefore using a LC filter is crucial. My setup uses a LC filter followed by a 5v linear voltage regulator to power the flight controller and OSD.</p></li>
<li><p>The OSD connects to your cc3d like so:</p></li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 63.74999999999999%;'><a id="assets-images-blog-minimosd-cc-d-wiring-f-png" href="/assets/images/blog/minimosd/cc3d-wiring-36496f82.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/cc3d-wiring-36496f82.png' class='trailing-space' ></img></a></div></div>

<h3 id="breakout">Breakout Pins</h3>

<ul>
<li><p>This step adds pin headers to the analog to digital converters on the atmega328p microcontroller. This is only useful if you plan to directly connect analog pins straight to the OSD, ie. plug the battery voltage divider or current sensor output into the OSD. I did this originally because my reciever didn&#39;t have PPM, and I therefore did not have enough ADCs on my flight controller, but then I switched to an RX with PPM, and so I now plug the sensors straight into my flight controller and get this data over the serial connection to the flight controller. Long story short, skip this if you&#39;re plugging your sensors into your flight controller.</p></li>
<li><p>To know what pins to breakout on the atmega328p chip, let&#39;s read the code:</p>

<ul>
<li><a href="https://github.com/ShikOfTheRa/scarab-osd/blob/master/MW_OSD/Config.h#L182">Pinouts</a></li>
<li><a href="https://github.com/ShikOfTheRa/scarab-osd/blob/master/MW_OSD/Config.h#L245">Voltage Pinouts</a></li>
</ul></li>
</ul>
<pre class="highlight plaintext"><code>#define AMPERAGEPIN   A1
#define TEMPPIN       A6           
#define RSSIPIN       A3              
#define PWMRSSIPIN    A3              
#define LEDPIN        7

#define VOLTAGEPIN    A0
#define VIDVOLTAGEPIN A2
</code></pre>

<ul>
<li>So let&#39;s break out those pins on the chip, here&#39;s the Atmega328p pinout</li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 71.79236043095005%;'><a id="assets-images-blog-atmega-p-atmega-p-pinout-da-png" href="/assets/images/blog/atmega328p/atmega328p-pinout-3da94489.png" class="linked-img colorbox"><img src='/assets/images/blog/atmega328p/atmega328p-pinout-3da94489.png' class='trailing-space' ></img></a></div></div>

<ul>
<li>Here&#39;s what it will look like when you&#39;re done. I&#39;ve broken out ground and A0-A3</li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 75.0%;'><a id="assets-images-blog-minimosd-adc-breakout-f-jpg" href="/assets/images/blog/minimosd/adc-breakout-66f71711.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/adc-breakout-66f71711.jpg' class='trailing-space' ></img></a></div></div>

<p>&nbsp;</p>

<h3 id="flashing">Flashing</h3>

<ul>
<li><p><a href="https://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx">CP2102 Driver</a></p></li>
<li><p>Grab the latest firmware source <a href="https://github.com/ShikOfTheRa/scarab-osd/releases">https://github.com/ShikOfTheRa/scarab-osd/releases</a></p>

<ul>
<li><code>git clone https://github.com/ShikOfTheRa/scarab-osd.git</code> or download the <a href="https://github.com/ShikOfTheRa/scarab-osd/releases">latest release</a>, use the download link if you don&#39;t want to build the GUI configurator</li>
</ul></li>
<li><p>Connect it like so</p></li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 73.046875%;'><a id="assets-images-blog-minimosd-cp-wiring-dcd-d-b-jpg" href="/assets/images/blog/minimosd/cp2102-wiring-dcd1d14b.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/cp2102-wiring-dcd1d14b.jpg' class='trailing-space' ></img></a></div></div>

<ul>
<li>Open <code>MW_OSD.ino</code> with Arduino, <a href="http://www.arduino.cc/en/Main/Software">download and install Arduino</a>, if you don&#39;t have it already.</li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 85.34798534798534%;'><a id="assets-images-blog-minimosd-upload-step-deb-f-png" href="/assets/images/blog/minimosd/upload-step1-deb5f925.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/upload-step1-deb5f925.png' class='trailing-space' ></img></a></div></div>

<p>&nbsp;</p>

<ul>
<li>Around line 22, uncomment the <code>BETAFLIGHT</code> (or <code>CLEANFLIGHT</code>) line and ensure all other lines in this section are commented out (start with <code>//</code>). Here I&#39;ve indicated I want to use <code>BETAFLIGHT</code>:</li>
</ul>
<pre class="highlight plaintext"><code>// Choose ONLY ONE option from the following long list :-

// latest release...
//#define MULTIWII                  // Uncomment this if you are using latest MULTIWII version from repository (2.4 at time of this MWOSD release)
//#define BASEFLIGHT                // Uncomment this if you are using latest BASEFLIGHT version from repository (Stable 2015.08.27 at time of this MWOSD release)
//#define TAULABS                   // Uncomment this if you are using the latest Tau Labs MSP Module
//#define DRONIN                    // Uncomment this if you are using the latest DRONIN MSP Module
//#define CLEANFLIGHT               // Uncomment this if you are using latest CLEANFLIGHT version from repository (1.11.0 at time of this MWOSD release)
#define BETAFLIGHT                // Uncomment this if you are using BETAFLIGHT (same as CLEANFLIGHT t time of this MWOSD release)
//#define HARIKIRI                  // Uncomment this if you are using HARIKIRI (for BOXNAMES compatibility)
//#define NAZA                      // Uncomment this if you are using NAZA flight controller
//#define iNAV                      // Uncomment this if you are using latest iNAV version from repository (1.01 at time of this MWOSD release)
//#define GPSOSD_UBLOX              // Uncomment this if you are using a UBLOX GPS module for a GPS based OSD
//#define GPSOSD_NMEA               // Uncomment this if you are using a NMEA compatible GPS module for a GPS based OSD
//#define GPSOSD_MTK                // Uncomment this if you are using a MTK module for a GPS based OSD
//#define NOCONTROLLER              // Uncomment this if you ahave nothing connected to the serial port - no controller or GPS module
// old releases supported...
//#define MULTIWII_V23              // Uncomment this if you are using MW versions 2.2/2.3  
//#define MULTIWII_V21              // Uncomment this if you are using MW versions 2.0/2.1  (for BOXNAMES compatibility)
//#define BASEFLIGHT20150327        // Uncomment this if you are using BASEFLIGHT up to and including version Stable 2015.03.27
//#define CLEANFLIGHT172            // Uncomment this if you are using CLEANFLIGHT versions up to and including 1.7.2
//#define CLEANFLIGHT180            // Uncomment this if you are using CLEANFLIGHT versions 1.8.0 &amp; 1.8.1 
//#define APM                       // Uncomment this if you are using APM compatible FC (Under development only)

</code></pre>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 55.97560975609757%;'><a id="assets-images-blog-minimosd-upload-step-f-a-a-png" href="/assets/images/blog/minimosd/upload-step2-f1a0913a.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/upload-step2-f1a0913a.png' class='trailing-space' ></img></a></div></div>

<p>&nbsp;</p>

<ul>
<li>Click the play button to upload and you should see:</li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 13.568521031207597%;'><a id="assets-images-blog-minimosd-upload-step-df-dab-png" href="/assets/images/blog/minimosd/upload-step3-43df4dab.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/upload-step3-43df4dab.png' class='trailing-space' ></img></a></div></div>

<p>&nbsp;</p>

<h3 id="ide">Building the IDE</h3>

<ul>
<li><p>You don&#39;t need to do this if you use the built version from the <a href="https://github.com/ShikOfTheRa/scarab-osd/blob/master/DOCUMENTATION/Downloads.md">latest release downloads page</a></p></li>
<li><p>Download <a href="https://processing.org/download/?processing">Processing</a> and <a href="http://www.sojamo.de/libraries/controlP5/download/controlP5-2.0.4.zip">controlP5</a></p></li>
<li><p>Extract and move controlp5 to the libraries folder:</p></li>
</ul>
<pre class="highlight plaintext"><code>  unzip controlP5-2.0.4.zip
  mv controlP5 ~/Documents/Processing/libraries
</code></pre>

<ul>
<li>Open <code>MW_OSD_GUI.pde</code> in Processing, you might see this, just click OK</li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 48.29842931937173%;'><a id="assets-images-blog-minimosd-ide-step-b-png" href="/assets/images/blog/minimosd/ide-step1-05b14540.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/ide-step1-05b14540.png' class='trailing-space' ></img></a></div></div>

<p>&nbsp;</p>

<ul>
<li><p>Install the library by clicking <code>Sketch -&gt; Import library -&gt; add library</code> and picking the extracted controlP5 folder in the directory <code>~/Documents/Processing/libraries</code></p></li>
<li><p>Click the play button and you should see the app running</p></li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 33.98692810457516%;'><a id="assets-images-blog-minimosd-ide-step-bfc-a-bd-png" href="/assets/images/blog/minimosd/ide-step2-bfc8a9bd.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/ide-step2-bfc8a9bd.png' class='trailing-space' ></img></a></div></div>

<p>&nbsp;</p>

<h3 id="cleanflight-config">Cleanflight Configuration</h3>

<ul>
<li><p>In CleanFlight configurator there is an option to send &quot;MultiWii Compatible current output,&quot; do not enable this checkbox.</p></li>
<li><p>The effect is twofold:</p></li>
</ul>
<pre class="highlight plaintext"><code>1. CleanFlight will allow negative values when this option is un-checked, which makes it possible to use a directional current sensor wired in either direction

2. Scarab OSD (when set to `#define CLEANFLIGHT` in `config.h`) will automatically adjust to the proper units, thereby reading the correct values
</code></pre>

<h3 id="osd-config">Scarab OSD Configuration</h3>

<ul>
<li><p>Note that when using &quot;Use FC...&quot; options, ie. using the data from the flight controller as opposed to the onboard analog to digital converters, the &quot;adjust&quot; fields have no effect.</p></li>
<li><p>Here&#39;s the <a href="https://github.com/ShikOfTheRa/scarab-osd/blob/master/DOCUMENTATION/User_Guide.md">user guide</a></p></li>
<li><p>Here&#39;s how to configure the sensors <a href="https://github.com/ShikOfTheRa/scarab-osd/blob/master/DOCUMENTATION/Calibration.md">Calibration Guide</a></p></li>
<li><p>My configuration looks like:</p></li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 61.751951431049434%;'><a id="assets-images-blog-minimosd-scarab-osd-config-dd-fc-png" href="/assets/images/blog/minimosd/scarab-osd-config-19dd57fc.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/scarab-osd-config-19dd57fc.png' class='trailing-space' ></img></a></div></div>

<ul>
<li>Note I&#39;m using all data from &quot;FC&quot;, meaning all the sensor info comes from the flight controller.</li>
</ul>

<p>&nbsp;</p>

<h3 id=troubleshooting">Troubleshooting</h3>

<p>If you&#39;re not getting video here are some things to try to switch to PAL or to NTSC, if you&#39;re not sure, just try one then the other.</p>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 55.24861878453039%;'><a id="assets-images-blog-minimosd-pal-ntsc-a-b-c-png" href="/assets/images/blog/minimosd/pal-ntsc-a3400b9c.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/pal-ntsc-a3400b9c.png' class='trailing-space' ></img></a></div></div>

<p>If your display doesn&#39;t have all the fields, open the layout editor, update anything (or nothing) and hit <code>WRITE</code></p>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 106.70391061452513%;'><a id="assets-images-blog-minimosd-layout-editor-a-a-png" href="/assets/images/blog/minimosd/layout-editor-a34a8906.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/layout-editor-a34a8906.png' class='trailing-space' ></img></a></div></div>

<p>If you&#39;re fonts look all weird, under <code>FONT TOOLS</code> hit <code>SELECT</code> open the data folder and pick the font you want to use. I used <code>default.mcm</code>. Hit <code>Open</code> then hit <code>Upload</code>, still in the <code>FONT TOOLS</code> section.</p>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 80.66465256797582%;'><a id="assets-images-blog-minimosd-pick-font-c-png" href="/assets/images/blog/minimosd/pick-font-348168c7.png" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/pick-font-348168c7.png' class='trailing-space' ></img></a></div></div>

<h3 id="voltage-divider">Voltage Monitor</h3>

<ul>
<li><p>I soldered a voltage divider into the current sensor package R1 - 10k &amp; R2 - 2.2k. I didn&#39;t have any precision resistors (1%), but 5% seems to work fine.</p>

<ul>
<li>Given the voltage divider formula <code>Vout = Z2 / ((Z1 + Z2)) * Vin</code> where Z1 is a resistor in series between Vin and Vout and V2 is a resistor in series between Vout and ground, we get <code>Vout = (2.2k / (10k + 2.2k)) * Vin</code> =&gt; <code>Vout = .18 * Vin</code></li>
<li>Given Vout, the voltage that the microcontroller sees, <code>Vin = ((10k + 2.2k)/2.2k) * Vout</code> =&gt; <code>Vin = 5.54 * Vout</code></li>
<li>Cleanflight&#39;s calculation is basically: <code>Vbattery = Vout * vbat_scale</code> it&#39;s a little more complicated because of the ADC and rounding issues, but conceptually. That&#39;s what it&#39;s doing.</li>
<li>Cleanflight expects vbat<em>scale in decivolts so our value will be `vbat</em>scale = 55.4 = 55`</li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 128.63636363636363%;'><a id="assets-images-blog-voltage-divider-schematic-af-e-b-png" href="/assets/images/blog/voltage_divider/schematic-af94e8b3.png" class="linked-img colorbox"><img src='/assets/images/blog/voltage_divider/schematic-af94e8b3.png' class='trailing-space' ></img></a></div></div>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 27.27272727272727%;'><a id="assets-images-blog-voltage-divider-formula-e-png" href="/assets/images/blog/voltage_divider/formula-62e34969.png" class="linked-img colorbox"><img src='/assets/images/blog/voltage_divider/formula-62e34969.png' class='trailing-space' ></img></a></div></div></li>
</ul>

<p>&nbsp;</p>

<h3 id="current-sensor">Current Sensing</h3>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 66.50390625%;'><a id="assets-images-blog-minimosd-DSC-ad-d-be-jpg" href="/assets/images/blog/minimosd/DSC05364-ad41d6be.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/DSC05364-ad41d6be.jpg' class='trailing-space' ></img></a></div></div>

<ul>
<li><p>In summary</p>

<ul>
<li>0A -&gt; 0.6V</li>
<li>100A -&gt; 4.6V</li>
</ul></li>
<li><p>The ACS758LCB-100U is a unidirectionals 40mV/A sensor.</p>

<ul>
<li>Sensor sensitivity of 40mv/a means the sensor output voltage will increase 40mV each one Ampere of real current increment flowing through the sensor.

<ul>
<li>Therefore, when current is 100A the voltage will be 4v + the quiescent voltage (0.6, described below)</li>
</ul></li>
<li>Unidirectional means the sensor cannot detect which direction the current is flowing. Note that when wiring up the current sensor, DIRECTIONALITY MATTERS. The datasheet shows the power line must be connected like so:</li>
</ul></li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 79.7752808988764%;'><a id="assets-images-blog-acs-pinout-d-ddd-bc-png" href="/assets/images/blog/acs758/pinout-d9ddd3bc.png" class="linked-img colorbox"><img src='/assets/images/blog/acs758/pinout-d9ddd3bc.png' class='trailing-space' ></img></a></div></div>

<ul>
<li>For example, in this photo the pink wire goes to the positive lead on the battery and the blue wire goes to the positive lead on the quad:</li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 133.33333333333331%;'><a id="assets-images-blog-minimosd-better-wiring-f-cec-a-jpg" href="/assets/images/blog/minimosd/better-wiring-4f2cec4a.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/better-wiring-4f2cec4a.jpg' class='trailing-space' ></img></a></div></div>

<ul>
<li>In the typical usage section this schematic is shown. I skipped the extra components and wired VIN straight from the 5v voltage regulator (described below) and VIOUT straight to pin 6 on the CC3D.</li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 83.51893095768375%;'><a id="assets-images-blog-acs-schematic-fa-b-png" href="/assets/images/blog/acs758/schematic-fa8119b3.png" class="linked-img colorbox"><img src='/assets/images/blog/acs758/schematic-fa8119b3.png' class='trailing-space' ></img></a></div></div>

<ul>
<li><p>Per the datasheet &quot;The ACS758 outputs an analog signal, VOUT , that varies linearly with the uni- or bi-directional AC or DC primary sampled current, IP, within the range specified&quot; In otherwords, the output is linear and proportional to the input voltage.</p></li>
<li><p>Because of ratiometry, the input voltage to the current sensor is important, so we&#39;ll use a 5v linear regulator to ensure the proper voltage. Ratiometric output means that the quiescent (when no current is passing through) voltage output, VIOUTQ, and the magnetic sensitivity, Sens, are proportional to the supply voltage, VCC.</p></li>
</ul>

<p><span class="center img-quarter-width">![ratiometric formula](blog/minimosd/ratiometric_formula.png&#39; %&gt;</p>

<ul>
<li><p>The output of the device when the primary current is zero, is defined in the datasheet, for unidirectional devices <code>= 0.12 × VCC</code> so our resting voltage will be <code>0.6</code> when no current is passing through.</p>

<ul>
<li>The datasheet also says -- variation in VIOUT(Q) can be attributed to the resolution of the Allegro linear IC quiescent voltage trim, magnetic hysteresis, and thermal drift.</li>
</ul></li>
<li><p>When setting the offset, remember it&#39;s almost impossible to see 0Amps under no-load conditions. In a real situation all your gear, mostly your AV TX, camera etc. will draw between 250mah and 400mah.</p></li>
</ul>

<p><h4 id="current-sensor-first-attempt">First attempt</h3></p>

<p>This was my first attempt to wiring the current sensor, use the second attempt method.</p>

<ul>
<li><p>Solder together a male and female XT-60 connector, putting the current sensor&#39;s big pins (they almost look like heatsinks) on the inline with the positive side. Directly connect the negative side of one XT-60 to the negative side of the other XT-60.</p>

<ul>
<li>I soldered these by tinning the 16awg wire and fluxing the pins then heating both for a moment.</li>
</ul></li>
<li><p>Pin 1 goes to VCC, +5V from a linear voltage regulator, GND goes to any common ground between the battery ground and the minimosd ground.</p></li>
<li><p>To test, I placed it inline w/ my battery charger (since we know the ouput of the charger)</p></li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 66.50390625%;'><a id="assets-images-blog-minimosd-current-sensor-testing-e-a-f-jpg" href="/assets/images/blog/minimosd/current-sensor-testing-2e97a51f.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/current-sensor-testing-2e97a51f.jpg' class='trailing-space' ></img></a></div></div>

<ul>
<li>I found that the un-attached current sensor was un-reliable as the solder joints quickly wore when the leads from the current sensor to the XT-60 connector is so short. I decided to improve the reliability by doing a few things.</li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 75.0%;'><a id="assets-images-blog-minimosd-broken-current-sensor-d-c-f-jpg" href="/assets/images/blog/minimosd/broken-current-sensor-d16c9f03.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/broken-current-sensor-d16c9f03.jpg' class='trailing-space' ></img></a></div></div>

<p><h4 id="current-sensor-second-attempt">Second attempt</h3></p>

<p>This method worked much better.</p>

<ul>
<li><p>Attach the current sensor to a piece of plastic or something rigid to ensure it can be properly affixed to the quad and the wires are not stressed.</p></li>
<li><p>When soldering the current sensor, tin both the sensor leads and the wire. Then take some thin wire and wrap the wire (see the copper wire in the photo below) around both the wire and the sensor lead. This will create a physical connection, making the solder stronger. If you have flux, flux the whole assembly then heat with your iron turned up to around 750. It should all flow together as you add solder creating a very strong joint.</p></li>
<li><p>Don&#39;t use an indepenent linear voltage regulator, instead, I pulled 5v off an extra pin on the OSD that I added to the 5v pin. This 5v is after the LC filter, so the voltage should be much more stable.</p></li>
</ul>

<div class='ratio-box-resizer img-three-quarters-width'><div class='ratio-box' style='padding-bottom: 75.0%;'><a id="assets-images-blog-minimosd-better-wiring-e-a-jpg" href="/assets/images/blog/minimosd/better-wiring-2-e86a1223.jpg" class="linked-img colorbox"><img src='/assets/images/blog/minimosd/better-wiring-2-e86a1223.jpg' class='trailing-space' ></img></a></div></div>

<ul>
<li>Read more on <a href="https://code.google.com/p/rush-osd-development/wiki/Current_Sensing_Tutorial">the kvosd guide</a>, yes, this is different firmware but the electrical basics still apply.</li>
</ul>

<p>&nbsp;</p>

<h3 id="rssi">RSSI</h3>

<p>I tried making this work with my cheap HobbyKing T6 (FS-T6A TX/RX), but without hacking up the reciever, it seems impossible. </p>

<p>The T6 RX apparently uses an A7105 wireles chip which, according to the datasheet, &quot;A7105 has built-in 8-bits ADC do RSSI measurement as well as carrier detection function&quot; on pin 1. Per the datasheet, it seems like one could breakout a pin and make it possible:</p>
<pre class="highlight plaintext"><code>17.1 RSSI Measurement
A7105 supports 8-bits digital RSSI to detect RF signal strength. RSSI value is stored in ADC [7:0] (1Dh). Fig 17.1 shows a typical plot of RSSI reading as a function of input power. This curve is base on the current gain setting of A7105 reference code. A7105 automatically averages 8-times ADC conversion a RSSI measurement until A7105 exits RX mode. Therefore, each RSSI measuring time is ( 8 x 20 x FADC). For quick RSSI measurement, recommend to set FSARS = 1 (FADC =8MHz, 20 us measuring time). For power saving, recommend to set FSARS = 0 (FADC =4MHz, 40 us measuring time). Be aware RSSI accuracy is about ± 6dBm.

</code></pre>

<p>Instead of going this route, it was easier setting up OpenLRSng and using RSSI on channel 9 of the PPM signal as described on my <a href="/blog/2015/05/19/fpv250-cleanflight/">fpv250 post</a>. The scarab osd configurator should set the RSSI range from 0 to 255.</p>

<div class='text-center' style='margin: 1em'>
Checkout my other guides at
<a href='/blog'>nathan.vertile.com/blog</a>
</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
                  var disqus_shortname = 'vertile';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</article>

</div>
</div>
</div>
</body>
</html>
