<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<meta content='width=device-width, initial-scale=1' name='viewport'>
<title>
rails log tagging
</title>
<link href="../../../../../assets/stylesheets/all-278564ea.css" rel="stylesheet" />
<script src="../../../../../assets/javascripts/all-384bf4b4.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-7406390-2', 'auto');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  
    // outbound link tracking
    // http://www.sitepoint.com/track-outbound-links-google-analytics/
    (function($) {
      "use strict";
      // current page host
      var baseURI = window.location.host;
      // click event on body
      $("body").on("click", function(e) {
        // abandon if link already aborted or analytics is not available
        if (e.isDefaultPrevented() || typeof ga !== "function") return;
        // abandon if no active link or link within domain
        var link = $(e.target).closest("a");
        if (link.length != 1 || baseURI == link[0].host) return;
        // cancel event and record outbound link
        e.preventDefault();
        var href = link[0].href;
        ga('send', {
          'hitType': 'event',
          'eventCategory': 'outbound',
          'eventAction': 'link',
          'eventLabel': href,
          'hitCallback': loadPage
        });
        // redirect after one second if recording takes too long
        setTimeout(loadPage, 1000);
        // redirect to outbound page
        function loadPage() {
          document.location = href;
        }
      });
    })(jQuery);
</script>

<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />
</head>
<body>
<nav class='navbar navbar-default' id='top' role='navigation'>
<div class='container'>
<div class='navbar-header'>
<div class='navbar-brand'>
<a href='/blog/'>
<img src="../../../../../assets/images/home/smile-0a95f89f.jpg" />
</a>
<span>rails log tagging</span>
</div>
<button class='navbar-toggle' data-target='.navbar-collapse' data-toggle='collapse' type='button'>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
</button>
<div class='navbar-right collapse navbar-collapse' id='bs-nav-collapse'>
<ul class='nav navbar-nav'>
<li>
<form class='search navbar-form' role='search'>
<div class='form-group'>
<input class='form-control bloodhound typeahead' data-articles='[["Rctimer BeerotorF3 Flight Controller","/blog/2016/02/03/rctimer-beerotorf3-flight-controller/"],["BlHeli ESCs","/blog/2015/12/06/blheli-esc-identification/"],["BlHeli ESC Upgrading and Configuration","/blog/2015/12/06/blheli-configuration/"],["BlHeli CleanFlight ESC Calibration","/blog/2015/12/06/blheli-calibration/"],["Rctimer Micro 160 BeeRotor Build, Setup and Review","/blog/2015/12/05/rctimer-micro-160-beerotor-build-setup-and-review/"],["Flashing SiLabs xRotor 20a with BlHeli via C2 4w-if","/blog/2015/11/16/flashing-xrotor-20a-with-blheli-via-4w-if/"],["Rctimer OZE32 / RTFQ Flip32 AIO Integrated Flight Controller Review and Setup","/blog/2015/11/09/rctimer-oze32-integrated-flight-controller-review-and-setup/"],["Rooting Marshmellow, keeping SELinux","/blog/2015/11/03/rooting-marshmellow-keeping-selinux/"],["MultiRotor Setup Checklist","/blog/2015/10/29/multirotor-setup-checklist/"],["ST-LINK flash and debug on the SPRacingF3","/blog/2015/10/24/st-link-flash-and-debug-on-the-spracingf3-discovery/"],["Debugging Android Native (NDK) Apps","/blog/2015/09/27/debugging-android-native-ndk-apps/"],["Fixing an Arduino 0x000000 Error","/blog/2015/09/16/fixing-an-arduino-0x000000-error/"],["GPS VK16U6 CleanFlight Setup","/blog/2015/08/26/gps-vk16u6-cleanflight-setup/"],["Go FPV Latency Testing","/blog/2015/08/24/go-fpv-latency-testing/"],["Building Android on Ubuntu 14.04","/blog/2015/07/23/building-android-on-ubuntu-14-04/"],["Migrating to Amazon Elastic Map Reduce (EMR)","/blog/2015/07/15/migrating-to-amazon-elastic-map-reduce-emr/"],["Naze32 ST-Link Debugging","/blog/2015/07/06/naze32-st-link-debugging/"],["Decompiling an APK","/blog/2015/06/30/decompiling-an-apk/"],["Nexpose Community Edition copy Scan Template","/blog/2015/06/17/nexpose-community-edition-copy-scan-template/"],["Wireless Video Tx/Rx FPV Channels","/blog/2015/06/17/boscam-tx-rx-fpv-channels/"],["Making a UHF 433mhz Inverted Vee Antenna Set","/blog/2015/06/15/making-a-uhf-433mhz-inverted-vee-antenna-set/"],["Setup OrangeLRS with OpenLRSng","/blog/2015/05/21/setup-orangelrs-with-openlrsng/"],["Go FPV Goggles","/blog/2015/05/21/go-fpv-goggles/"],["FPV250 with Cleanflight, Minimosd, OpenLRSng and a Xiaomi Yi GoPro Clone","/blog/2015/05/19/fpv250-cleanflight/"],["Flashing BlHeli on HobbyKing BlueSeries 12a ESCs With a Chinese Arduino Nano Clone","/blog/2015/05/15/flashing-blheli-on-hobbyking-blueseries-12a-escs-with-a-chinese-arduino-nano-clone/"],["Flashing NodeMCU on the ESP8266","/blog/2015/05/14/flashing-nodemcu-on-the-esp8266/"],["Ebay HC-05 Bluetooth Setup Guide","/blog/2015/05/12/ebay-hc-05-bluetooth-setup-guide/"],["3D Camera on the Tricopter","/blog/2015/05/12/3d-camera-on-the-tricopter/"],["ProRes editing in Photoshop","/blog/2015/05/11/prores-editing-in-photoshop/"],["Xiaomi Yi -- The Ant Camera","/blog/2015/05/08/xiaomi-yi-the-ant-camera/"],["Minim OSD","/blog/2015/04/22/minim-osd/"],["Flashing BlHeli on HobbyKing F20 ESCs With a Chinese Arduino Nano Clone","/blog/2015/04/20/flashing-blheli-on-hobbyking-f20-escs-with-a-chinese-arduino-nano-clone/"],["Handling Dates in Hadoop Pig","/blog/2015/04/17/handling-dates-in-hadoop-pig/"],["LiPo Battery Price Analysis","/blog/2015/04/10/lipo-battery-price-analysis/"],["ADB over WiFi (aka, how do I debug when using USB host mode?)","/blog/2015/03/27/adb-over-wifi-aka-how-do-i-debug-when-using-usb-host-mode/"],["Shrink a linux VM on OSX","/blog/2015/03/18/shrink-a-linux-vm-on-osx/"],["Mounting a VHD NTFS image on Ubuntu","/blog/2015/02/27/mounting-a-vhd-ntfs-image-on-ubuntu/"],["Ubuntu on the Beaglebone Black","/blog/2015/01/16/ubuntu-on-the-beaglebone-black/"],["Configuring the HK-T6A for a Flight Simulator","/blog/2015/01/02/configuring-the-hk-t6a-for-a-flight-simulator/"],["A complete noob&#x0027;s guide to RC","/blog/2015/01/02/a-complete-noobs-guide-to-rc/"],["DropCam on a Captive Portal","/blog/2014/11/17/dropcam-on-a-captive-portal/"],["Java reversing tips","/blog/2014/09/18/java-reversing-tips/"],["Ooize Data Pipeline Done-Flag","/blog/2014/09/02/oozie-data-pipeline-done-flag/"],["Time Machine on exFat","/blog/2014/08/06/Time_Machine_on_exFat/"],["Optimizing Postgresql","/blog/2014/01/31/Optimizing_Postgresql/"],["Mail Maker","/blog/2014/01/24/Mail_Maker/"],["Angularjs and Rails","/blog/2013/07/12/Angularjs_and_Rails/"],["nginx ssl chained certs","/blog/2013/04/24/nginx_ssl_chained_certs/"],["rails log tagging","/blog/2013/04/24/rails_log_tagging/"],["Converting an Android Project to Maven","/blog/2013/04/16/Converting_an_Android_Project_to_Maven/"],["Oh! Map my rails!","/blog/2013/04/09/Oh_Map_my_rails/"],["mysql permissions","/blog/2013/04/09/mysql_permissions/"],["reset mysql slave","/blog/2013/03/29/reset_mysql_slave/"],["installing rmagick on 10.8 with homebrew","/blog/2013/02/14/installing_rmagick_on_108_with_homebrew/"],["NP-Completeness","/blog/2013/02/08/NP-Completeness/"],["Find and replace non-breaking spaces in vim","/blog/2013/02/01/Find_and_replace_non-breaking_spaces_in_vim/"],["Open Resty the Prebuilt Reverse Proxy","/blog/2013/02/01/Open_Resty_the_Prebuilt_Reverse_Proxy/"],["Sublime Text 2 Tweaks","/blog/2012/12/17/Sublime_Text_2_Tweaks/"],["Batch Convert CR2 to JPG","/blog/2012/12/01/Batch_Convert_CR2_to_JPG/"],["Androids in the wild","/blog/2012/06/30/Androids_in_the_wild/"],["Why you need database_cleaner","/blog/2012/06/11/Why_you_need_database_cleaner/"],["Find and replace in files on linux/unix","/blog/2012/05/12/Find_and_replace_in_files_on_linuxunix/"],["a pithy guide to railsconf 2012","/blog/2012/04/26/a_pithy_guide_to_railsconf_2012/"],["faster rails boot ruby 1.9.3 + debugger","/blog/2012/04/12/faster_rails_boot_ruby_193_debugger/"],["homebrew -- fix that nasty mysql.server start segfault","/blog/2012/03/29/homebrew_--_fix_that_nasty_mysqlserver_start_segfault/"],["read/write filesystem on rooted android for an ad-free android experience","/blog/2012/02/14/readwrite_filesystem_on_rooted_android_for_an_ad-free_android_experience/"],["Turn Wikipedia Back On","/blog/2012/01/17/Turn_Wikipedia_Back_On/"],["compiling qt4 on centos 5","/blog/2012/01/06/compiling_qt4_on_centos_5/"],["pip install pymongo with xcode 4","/blog/2011/08/09/pip_install_pymongo_with_xcode_4/"],["interactive python history -- better titled \"gimme some up arrow love\"","/blog/2011/08/05/interactive_python_history_--_better_titled_gimme_some_up_arrow_love/"],["Centos 5.5 yum repo sha256 fix","/blog/2011/07/27/Centos_55_yum_repo_sha256_fix/"],["Apple Keyboard for Android!","/blog/2011/07/15/Apple_Keyboard_for_Android/"],["jQuery Everywhere","/blog/2011/05/24/jQuery_Everywhere/"],["Django Migrations","/blog/2011/05/11/Django_Migrations/"],["RVM + Rails + Git + HTML5 Boiler Plate... What more could you possibly want?","/blog/2011/02/22/RVM_Rails_Git_HTML5_Boiler_Plate_What_more_could_you_possibly_want/"],["OneCast 2.0 - downloadable podcasts for androids of every color","/blog/2011/02/18/OneCast_20_-_downloadable_podcasts_for_androids_of_every_color/"],["Default Android Menu Icons in Your App","/blog/2011/02/17/Default_Android_Menu_Icons_in_Your_App/"],["Windows 7 x64 Android Development (ADB)","/blog/2010/11/06/Windows_7_x64_Android_Development_ADB/"],["Firefox Plugin - Watching for an Application Exit Event","/blog/2010/05/03/Firefox_Plugin_-_Watching_for_an_Application_Exit_Event/"],["Stop Redrawing a Fixed Orientation Android App","/blog/2010/03/08/Stop_Redrawing_a_Fixed_Orientation_Android_App/"]]' placeholder='Search' type='text'>
</div>
</form>
</li>
</ul>
</div>
</div>
</div>
</nav>

<div class='container'>
<div class='row row-offcanvas row-offcanvas-left'>
<!-- sidebar -->
<div class='col-xs-3 col-sm-3 sidebar-offcanvas'>
<div id='sidebar' role='navigation'>
<div class='sidebar-contents'>
<div class='row'>
<div class='col-lg-12 page-header'>
<a href='#top'>Contents</a>
</div>
</div>
<div class='row'>
<div class='col-lg-12 table-of-contents'>
<ul class="nav"><li><a class="type-h2" href="#elasticsearch"><h2>Elasticsearch:</h2></a></li>
<li><a class="type-h2" href="#mongodb"><h2>MongoDB:</h2></a></li>
<li><a class="type-h2" href="#graylog2"><h2>Graylog2:</h2></a></li></ul>
</div>
</div>
<div class='row'>
<div class='col-lg-12 page-header'>
Related Articles
</div>
</div>
<div class='row'>
<div class='col-lg-12 related'>
<ul>
<li><a href="/blog/2015/08/24/go-fpv-latency-testing/">Go FPV Latency Testing</a></li>
<li><a href="/blog/2015/05/14/flashing-nodemcu-on-the-esp8266/">Flashing NodeMCU on the ESP8266</a></li>
<li><a href="/blog/2011/02/22/RVM_Rails_Git_HTML5_Boiler_Plate_What_more_could_you_possibly_want/">RVM + Rails + Git + HTML5 Boiler Plate... What more could you possibly want?</a></li>
<li><a href="/blog/2015/12/06/blheli-esc-identification/">BlHeli ESCs</a></li>
<li><a href="/blog/2015/01/02/configuring-the-hk-t6a-for-a-flight-simulator/">Configuring the HK-T6A for a Flight Simulator</a></li>
</ul>
</div>
</div>
<div class='row'>
<div class='col-lg-12 page-header text-center'>
<div class='drawer-footer'>
<small>
©
<a href='mailto:nathan@vertile.com'>Nathan Tsoi</a>
</small>
</div>
</div>
</div>
<div class='row connect'>
<div class='col-lg-12 text-center'>
<a class='btn-sm btn-default' href='https://github.com/nathantsoi' target='_blank'>
<i class='fa fa-github'></i>
</a>
<a class='btn-sm btn-default' href='https://bitbucket.org/nathantsoi' target='_blank'>
<i class='fa fa-bitbucket'></i>
</a>
<a class='btn-sm btn-default' href='https://twitter.com/nathantsoi/' target='_blank'>
<i class='fa fa-twitter'></i>
</a>
<a class='btn-sm btn-default' href='https://angel.co/nathantsoi' target='_blank'>
<i class='fa fa-angellist'></i>
</a>
<a class='btn-sm btn-default' href='https://linkedin.com/in/nattsoi/' target='_blank'>
<i class='fa fa-linkedin'></i>
</a>
<a class='btn-sm btn-default' href='https://facebook.com/nathantsoi' target='_blank'>
<i class='fa fa-facebook'></i>
</a>
<a class='btn-sm btn-default' href='https://plus.google.com/112518806102274696668' target='_blank'>
<i class='fa fa-google-plus'></i>
</a>
<a class='btn-sm btn-default' href='https://news.ycombinator.com/user?id=natvert' target='_blank'>
<i class='fa fa-hacker-news'></i>
</a>
<a class='btn-sm btn-default' href='https://trello.com/nathantsoi' target='_blank'>
<i class='fa fa-trello'></i>
</a>
</div>
</div>
</div>
</div>
</div>

<!-- main area -->
<div class='col-sm-9 col-xs-12' id='mainbar'>
<article>
<h1 id="grepping-through-logs-is-a-pain">Grepping through logs is a pain,</h1>

<p>but sometimes unavoidable when reconstructing a user&#39;s path through your app. How did they raised those last 4 million errors you just got emailed about?</p>

<p>If you have multiple processes writing to your logfile, the requests and background processes&#39; logs would be intermingled and trying to sort out what really happened to the user was hopeless, until Rails 3.2.</p>

<p>ActiveSupport::TaggedLogging to the rescue. 37 Signals wrote a great article about it here: <a href="http://37signals.com/svn/posts/3167-code-spelunking-in-the-all-new-basecamp" title="tagged logging"><a href="http://37signals.com/svn/posts/3167-code-spelunking-in-the-all-new-basecamp">http://37signals.com/svn/posts/3167-code-spelunking-in-the-all-new-basecamp</a></a>.</p>

<p>We&#39;re going to go a mile further and aggregate our logs in Graylog2, which is a little UI on top of Elasticsearch that allows easy searching and filtering of logs.</p>

<p>Also, we&#39;re going to do our own custom log tagging with log4r since we&#39;ll be using it to ship our logs to Graylog. I started by reading <a href="http://blog.backupify.com/2012/06/27/contextual-logging-with-log4r-and-graylog/">this article by the guys over at backupify</a>.</p>

<h1 id="first-i-installed-graylog2">First, I installed Graylog2,</h1>

<p>which is surprisingly difficult.</p>

<p>I setup elasticsearch on a single node, same for MongoDB. The tricky part for me was getting Graylog to talk to Elasticsearch.</p>

<p>On Ubuntu this seems to work:</p>

<h2 id="elasticsearch">Elasticsearch:</h2>

<p><a href="https://gist.github.com/rajraj/1556657">https://gist.github.com/rajraj/1556657</a></p>

<p>Notable config changes:</p>
<pre class="highlight plaintext"><code># my config was in /usr/local/share/elasticsearch/config/elasticsearch.yml
cluster.name: graylog2
</code></pre>

<h2 id="mongodb">MongoDB:</h2>

<p><a href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux/">http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux/</a></p>

<h2 id="graylog2">Graylog2:</h2>

<p>Download, extract, copy over the config and run:</p>
<pre class="highlight plaintext"><code># download extract and move to your install directory
#  i put it in /opt/graylog2-server

# copy config
cp graylog2.conf.example /etc/graylog2.conf
cp elasticsearch.yml.example /etc/graylog2-elasticsearch.yml
# Test run in the foreground
java -jar graylog2-server.jar --debug
# Run in the background
cd bin/
./graylog2ctl start
</code></pre>

<p>Notable config changes:</p>
<pre class="highlight plaintext"><code># in /etc/graylog2-elasticsearch.yml

# this must be the same as for your elasticsearch cluster
cluster.name: graylog2

# you could also leave this out, but makes it easier to identify the graylog2 client instance
node.name: "graylog2-server"

# we don't want the graylog2 client to store any data, or be master node
node.master: false
node.data: false

# i turned off multicast
# adapt these for discovery to work in your network! multicast can be tricky
#discovery.zen.ping.multicast.address: 172.24.0.14
#discovery.zen.ping.multicast.group: 224.0.0.1

# i only have 1 node
discovery.zen.minimum_master_nodes: 1

# still turning off multicast
# 1. Disable multicast discovery (enabled by default):
discovery.zen.ping.multicast.enabled: false

# set this to your servername or ip:9300
# 2. Configure an initial list of master nodes in the cluster
#    to perform discovery when new nodes (master or data) are started:
discovery.zen.ping.unicast.hosts: ["YOURSERVERHERE:9300"]
</code></pre>

<p>Ok, Graylog server success.</p>

<p>You&#39;ll also need to install the web app, but since you&#39;re already on rails, I&#39;ll leave that exercise to you. I am running <a href="https://github.com/nathantsoi/graylog2-web-interface">a fork of the graylog web app that deploys via capistrano</a>, next to our other rails apps. It took a little nginx config and installing the right ruby with <a href="https://github.com/sstephenson/rbenv">rbenv</a>. Full directions are available over at graylog&#39;s site<a href="http://support.torch.sh/help/kb/graylog2-web-interface/installing-graylog2-web-interface-on-debian-6"><a href="http://support.torch.sh/help/kb/graylog2-web-interface/installing-graylog2-web-interface-on-debian-6">http://support.torch.sh/help/kb/graylog2-web-interface/installing-graylog2-web-interface-on-debian-6</a></a></p>

<h1 id="now-let-39-s-make-our-app-awesome">Now let&#39;s make our app awesome.</h1>

<p>First, add the gems.</p>
<pre class="highlight plaintext"><code>gem 'log4r-exceptionable'
gem 'log4r-gelf'
gem 'lumber'
</code></pre>

<p><code>bundle install</code></p>

<p>Add some config to your <code>config/production.rb</code></p>
<pre class="highlight plaintext"><code>config.lumber.enabled = true
</code></pre>

<p>Note: you may want to test by adding the above to <code>config/development.rb</code> as well</p>

<p>Add a helper to your <code>config/application.rb</code></p>
<pre class="highlight plaintext"><code># Put this before the module definition

# Print out all MDC items as space delimited key=value string, and is used in our
# log4r pattern formatter so that each log message shows the context active when it was called
def log4r_context
  ctx = Log4r::MDC.get_context.collect {|k, v| k.to_s + "=" + v.to_s }.join(" ")
  ctx.gsub!('%', '%%') # escape out embedded %'s so pattern formatter doesn't get confused
  return ctx
end
</code></pre>

<p>Add a before filter to your <code>application_controller.rb</code></p>
<pre class="highlight plaintext"><code>  before_filter :log_context
  # Make sure you keep your protected section at the end of class definition
  protected
    def log_context
      # Clear out any existing context from previous requests
      Log4r::MDC.get_context.keys.each {|k| Log4r::MDC.remove(k) }

      # Set the context
      #  the GelfOutputter will read the hash generated by Log4r and add these additional fields to the gelf message
      request_at = Time.now
      Log4r::MDC.put('app', Rails.application.class.parent_name)
      Log4r::MDC.put('env', Rails.env[0...3])
      Log4r::MDC.put('pid', Process.pid)
      Log4r::MDC.put('uuid', SecureRandom.uuid)
      Log4r::MDC.put('user_id', current_user.id) if current_user.present?
      Log4r::MDC.put('remote_ip', request.remote_ip)
    end
</code></pre>

<p>Configure log4r in <code>config/log4r.yml</code></p>
<pre class="highlight plaintext"><code>log4r_config:
  pre_config:
    root:
      level: DEBUG
  loggers:
    - name: "rails"
      level: DEBUG
      outputters:
        - logfile
        - gelf
  outputters:
    - type: FileOutputter
      name: logfile
      filename: "#{log_file}"
      trunc: 'false'
      formatter   :
        date_pattern: '%H:%M:%S'
        pattern     : '%-5l %d %C [#{log4r_context}]: %M'
        type        : PatternFormatter
    - type: GelfOutputter
      name: gelf
      gelf_server: '[YOUR GELF SERVER IP OR HOSTNAME]'
      gelf_port: '12201'
      # Optional - showing default values
      # facility: "gelf-rb"
      # host: "#{Socket.gethostname}"
      # max_chunk_size: 'LAN'
      # level: INFO
</code></pre>

<p>Optionally, mount the lumber server to allow temporarily changing the log-level per model in <code>config/routes.rb</code></p>
<pre class="highlight plaintext"><code># at the top add:
require 'lumber/server'

  # in routes draw add:
  #  I'm using devise + cancan, if a user can manage lumber, let them get to /lumber
  # to mount the route without permissions, just
  #  mount Lumber::Server.new, :at =&gt; "/lumber"
  lumber_constraint = lambda do |request|
    (current_user = request.env['warden'].user).present? &amp;&amp; current_user.can?(:manage, :lumber)
  end
  constraints lumber_constraint do
    mount Lumber::Server.new, :at =&gt; "/lumber"
  end
</code></pre>

<p>All set, now just deploy your app and watch the logs roll in.</p>

<div class='text-center' style='margin: 1em'>
Checkout my other guides at
<a href='/blog'>nathan.vertile.com/blog</a>
</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
                  var disqus_shortname = 'vertile';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</article>

</div>
</div>
</div>
<script>
  var vglnk = { key: 'ddedf6f00d454f08b923376f1cb1cfbf' };
  
  (function(d, t) {
    var s = d.createElement(t); s.type = 'text/javascript'; s.async = true;
    s.src = '//cdn.viglink.com/api/vglnk.js';
    var r = d.getElementsByTagName(t)[0]; r.parentNode.insertBefore(s, r);
  }(document, 'script'));
</script>

</body>
</html>
